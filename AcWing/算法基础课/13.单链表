https://www.acwing.com/problem/content/description/828/

#include<bits/stdc++.h>
using namespace std;

const int N=100010;
int M;
int e[N],ne[N],head,idx;

void init(){  //åˆ›å»ºç©ºé“¾è¡¨
    head=-1;
    idx=0;
}

//å‘é“¾è¡¨å¤´æ’å…¥ä¸€ä¸ªæ•°ï¼›
void add_to_head(int k){
    e[idx]=k;
    ne[idx]=head;
    head=idx;
    idx++;  //æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä½ï¼Œä¸ºä¸‹ä¸€æ¬¡æ’å…¥å…ƒç´ åšå‡†å¤‡
}

//åœ¨ç¬¬ kä¸ªæ’å…¥çš„æ•°åæ’å…¥ä¸€ä¸ªæ•°ã€‚
void add(int k,int x){
    e[idx]=x;
    ne[idx]=ne[k];
    ne[k]=idx;
    idx++;
}

//åˆ é™¤ç¬¬ğ‘˜ä¸ªæ’å…¥çš„æ•°åé¢çš„ä¸€ä¸ªæ•°ï¼›
void remove(int k){
    ne[k]=ne[ne[k]];
}

int main(){
    cin>>M;
    init();
    for(int i=0;i<M;i++){
        char s;
        cin>>s;
        if(s=='H'){
            int x;
            cin>>x;
            add_to_head(x);
        }
        if(s=='D'){
            int k;
            cin>>k;
            if(k==0) head=ne[head];
            else remove(k-1);
        }
        if(s=='I'){
            int k,x;
            cin>>k>>x;
            add(k-1,x);
        }
    }

    for(int i=head;i!=-1;i=ne[i])  //å¦‚æœé“¾è¡¨åœ¨åˆå§‹åŒ–åä»ç„¶æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆ for å¾ªç¯å°†ä¸ä¼šæ‰§è¡Œä»»ä½•è¿­ä»£ï¼Œå› ä¸º head ç­‰äº -1ï¼Œä¸æ»¡è¶³å¾ªç¯çš„ç»§ç»­æ¡ä»¶ã€‚
    cout<<e[i]<<' ';               //ä¸Šé¢çš„å¾ªç¯æ¡ä»¶ä¸­çš„i!=-1,è¿™ä¸ª-1æ˜¯ä¸ä¸€å¼€å§‹headçš„åˆå§‹å€¼æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯ä¸€å¼€å§‹å°±å®šä¹‰å¥½çš„åˆå§‹å€¼ï¼ˆç‰¹æ®Šå€¼ï¼‰

    return 0;
}
